
<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>PAES Command - Sistema Neural Anti-Tracking Blindado</title>
    
    <!-- Fonts optimizados sin tracking -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- CIRUG√çA DE EMERGENCIA CSP v6.0 - REPARACI√ìN VASCULAR QUIR√öRGICA -->
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://cdn.gpteng.co; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com; img-src 'self' data: blob:; connect-src 'self' wss: ws: https: https://api.lovable.dev https://settifboilityelprvjd.supabase.co https://*.supabase.co https://supabase.co https://o4506071217143808.ingest.sentry.io wss://settifboilityelprvjd.supabase.co wss://*.supabase.co; frame-src 'none'; object-src 'none'; base-uri 'none'; form-action 'self'; upgrade-insecure-requests; block-all-mixed-content;">
    
    <!-- Headers de seguridad vascular optimizados -->
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <meta http-equiv="Referrer-Policy" content="no-referrer">
    <meta http-equiv="Cross-Origin-Embedder-Policy" content="require-corp">
    <meta http-equiv="Cross-Origin-Opener-Policy" content="same-origin">
    
    <!-- PERMISSIONS POLICY QUIR√öRGICO -->
    <meta http-equiv="Permissions-Policy" content="accelerometer=(), autoplay=(), camera=(), geolocation=(), gyroscope=(), magnetometer=(), microphone=(), payment=(), usb=(), web-share=(), xr-spatial-tracking=(), clipboard-read=(), clipboard-write=(), gamepad=(), speaker-selection=(), conversion-measurement=(), focus-without-user-activation=(), hid=(), idle-detection=(), serial=(), sync-xhr=(), trust-token-redemption=(), window-placement=(), local-fonts=()">
    
    <!-- Anti-fingerprinting quir√∫rgico -->
    <meta name="robots" content="noindex, nofollow, noarchive, nosnippet, noimageindex">
    <meta name="googlebot" content="noindex, nofollow, noarchive, nosnippet, noimageindex">
    
    <!-- SISTEMA DE MONITOREO VASCULAR v6.0 - QUIR√öRGICO -->
    <script>
      console.log('üö® CIRUG√çA DE EMERGENCIA v6.0 INICIADA - Reparaci√≥n vascular quir√∫rgica:', Date.now());
      
      // Monitor vascular quir√∫rgico ultra-optimizado
      window.paesVascularMonitor = {
        supabaseConnections: 0,
        lastConnection: null,
        errors: [],
        status: 'SURGERY_MODE',
        surgeryPhase: 'VASCULAR_REPAIR'
      };
      
      // Interceptor quir√∫rgico para Supabase
      const originalFetch = window.fetch;
      window.fetch = function(...args) {
        const url = args[0];
        if (typeof url === 'string' && url.includes('supabase.co')) {
          window.paesVascularMonitor.supabaseConnections++;
          window.paesVascularMonitor.lastConnection = new Date().toISOString();
          window.paesVascularMonitor.status = 'VASCULAR_FLOW_DETECTED';
          console.log('ü©∏ FLUJO VASCULAR RESTAURADO:', url);
        }
        return originalFetch.apply(this, args)
          .then(response => {
            if (typeof url === 'string' && url.includes('supabase.co')) {
              if (response.ok) {
                window.paesVascularMonitor.status = 'VASCULAR_FLOW_HEALTHY';
                console.log('‚úÖ CIRCULACI√ìN SUPABASE EXITOSA:', response.status);
              } else {
                window.paesVascularMonitor.status = 'VASCULAR_OBSTRUCTION';
                window.paesVascularMonitor.errors.push({
                  url: url,
                  status: response.status,
                  timestamp: new Date().toISOString()
                });
                console.error('‚ùå OBSTRUCCI√ìN VASCULAR:', response.status, url);
              }
            }
            return response;
          })
          .catch(error => {
            if (typeof url === 'string' && url.includes('supabase.co')) {
              window.paesVascularMonitor.status = 'VASCULAR_RUPTURE';
              window.paesVascularMonitor.errors.push({
                url: url,
                error: error.message,
                timestamp: new Date().toISOString()
              });
              console.error('üö® RUPTURA VASCULAR CR√çTICA:', error, url);
            }
            throw error;
          });
      };
      
      // Anti-fingerprinting quir√∫rgico simplificado
      if (window.navigator && window.navigator.getBattery) {
        delete window.navigator.getBattery;
      }
      
      // Canvas noise quir√∫rgico ultra-eficiente
      const originalToDataURL = HTMLCanvasElement.prototype.toDataURL;
      HTMLCanvasElement.prototype.toDataURL = function(...args) {
        const context = this.getContext('2d');
        if (context) {
          const imageData = context.getImageData(0, 0, 1, 1);
          if (imageData.data.length > 0) {
            imageData.data[0] = imageData.data[0] ^ 1;
            context.putImageData(imageData, 0, 0);
          }
        }
        return originalToDataURL.apply(this, args);
      };
      
      // Monitoreo vascular cada 3 segundos (optimizado)
      setInterval(() => {
        console.log('ü©∏ ESTADO VASCULAR v6.0:', {
          timestamp: new Date().toISOString(),
          status: window.paesVascularMonitor.status,
          connections: window.paesVascularMonitor.supabaseConnections,
          lastConnection: window.paesVascularMonitor.lastConnection,
          errors: window.paesVascularMonitor.errors.length,
          surgeryVersion: '6.0-emergency'
        });
      }, 3000);
      
      // Verificaci√≥n post-quir√∫rgica
      setTimeout(() => {
        if (window.paesVascularMonitor.supabaseConnections === 0) {
          console.warn('‚ö†Ô∏è CIRUG√çA INCONCLUSA - Reiniciar flujo vascular');
          window.paesVascularMonitor.status = 'POST_SURGERY_MONITORING';
        } else {
          console.log('‚úÖ CIRUG√çA EXITOSA - Flujo vascular restaurado');
          window.paesVascularMonitor.surgeryPhase = 'RECOVERY';
        }
      }, 2000);
    </script>
  </head>
  <body>
    <div id="root"></div>
    <script src="https://cdn.gpteng.co/gptengineer.js" type="module"></script>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
